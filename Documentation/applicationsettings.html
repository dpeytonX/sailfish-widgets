<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- applicationsettings.cpp -->
  <title>ApplicationSettings Class | Safilfish Widgets 1.4</title>
</head>
<body>
<link rel='stylesheet' href='style/stylesheet.css' /> <h2>Back to <a href='https://github.com/prplmnky/sailfish-widgets'>GitHub</a></h2><li>ApplicationSettings</li>
<div class="sidebar">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#public-slots">Public Slots</a></li>
<li class="level1"><a href="#signals">Signals</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">ApplicationSettings Class</h1>
<!-- $$$ApplicationSettings-brief -->
<p>The <a href="applicationsettings.html">ApplicationSettings</a> class <a href="#details">More...</a></p>
<!-- @@@ApplicationSettings -->
<div class="table"><table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign"> <span class="preprocessor">#include &lt;ApplicationSettings&gt;</span>
</td></tr><tr><td class="memItemLeft rightAlign topAlign"> Since:</td><td class="memItemRight bottomAlign">  Qt 5.0</td></tr><tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> </td></tr></table></div><ul>
<li><a href="applicationsettings-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="public-functions"></a>
<h2 id="public-functions">Public Functions</h2>
<div class="table"><table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#ApplicationSettings">ApplicationSettings</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#ApplicationSettings-2">ApplicationSettings</a></b>(QQuickItem *<i> parent</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#ApplicationSettings-3">ApplicationSettings</a></b>(const QString &amp;<i> appName</i>, const QString &amp;<i> fileName</i>, QQuickItem *<i> parent</i> = 0)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#dtor.ApplicationSettings">~ApplicationSettings</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QString </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#applicationName">applicationName</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QString </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#fileName">fileName</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#isValid">isValid</a></b>(const QString &amp;<i> property</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#setApplicationName">setApplicationName</a></b>(const QString &amp;<i> appName</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#setFileName">setFileName</a></b>(const QString &amp;<i> fileName</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QSettings * </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#settings">settings</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QVariant </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#value">value</a></b>(const QString &amp;<i> setting</i>)</td></tr>
</table></div>
<a name="public-slots"></a>
<h2 id="public-slots">Public Slots</h2>
<div class="table"><table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#refresh">refresh</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#setTarget">setTarget</a></b>(const QQmlProperty &amp;<i> qmlProperty</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#updateProperty">updateProperty</a></b>(const QString &amp;<i> propertyName</i>, const QVariant &amp;<i> value</i>)</td></tr>
</table></div>
<a name="signals"></a>
<h2 id="signals">Signals</h2>
<div class="table"><table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#applicationNameChanged">applicationNameChanged</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#fileNameChanged">fileNameChanged</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#settingsInitialized">settingsInitialized</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="applicationsettings.html#settingsPropertyUpdated">settingsPropertyUpdated</a></b>(QString<i> name</i>)</td></tr>
</table></div>
<a name="details"></a>
<!-- $$$ApplicationSettings-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<p>The <a href="applicationsettings.html">ApplicationSettings</a> class</p>
<p>This class will support reading and writing of QSettings configuration file.</p>
<p>Instantiate this QML object as you would any other and provide the <a href="applicationsettings.html#applicationName">applicationName</a> and <a href="applicationsettings.html#fileName">fileName</a>. These <a href="applicationsettings.html#applicationName">applicationName</a> will be &quot;harbour-yourproject&quot; and the <a href="applicationsettings.html#fileName">fileName</a> will be something like &quot;settings&quot; or &quot;configuration&quot;. There is nothing technically stopping you from using multiple <a href="applicationsettings.html">ApplicationSettings</a> within the same application. However, until you provide both of these properties with actual values, this object will not persist any values.</p>
<p>An example usage is as follows.</p>
<pre class="qml"><span class="type"><a href="applicationsettings.html#ApplicationSettings">ApplicationSettings</a></span> {
    <span class="name">id</span>: <span class="name">settings</span>
    <span class="name">applicationName</span>: <span class="string">&quot;harbour-applicationsettings&quot;</span>
    <span class="name">fileName</span>: <span class="string">&quot;settings&quot;</span>

    <span class="comment">//By default, we want to show the user a tour of the app</span>
    property <span class="type">bool</span> <span class="name">performFirstRunWizard</span>: <span class="number">true</span>
}</pre>
<p>We define an ApplicationSetting QML type for the <code>harbour-applicationsettings</code> application and give it the file name of &quot;settings&quot;. (This will appear on the local user's home directory as .config/harbour-applicationsettings/settings). Next, we set the property <code>performFirstRunWizard</code> to <code>true</code>. This is only to provide a default value, and if the property exists, then it will be overwritten once the component has finished construction. Even if the property does not exist in the settings file, we would still have a valid property. If later on, we set <code>performFirstRunWizard</code> to <code>false</code>, then it will be persisted in the settings file.</p>
<p>Multiple instances of ApplicationSetting in the same application will be notifed when a settings property is updated as long as the following requirements are met:</p>
<ul>
<li>The second ApplicationSetting uses the same <a href="applicationsettings.html#applicationName">applicationName</a> and <a href="applicationsettings.html#fileName">fileName</a></li>
<li>The second ApplicationSetting has the property defined.</li>
</ul>
<p>However, this will not detect external modifications to the config file--two or more applications running simultaneously or hand editing of the file while your application is running. You will need to handle these scenarios if your application requires it.</p>
<p>Back to <a href="index.html">Sailfish Widgets</a></p>
</div>
<!-- @@@ApplicationSettings -->
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$ApplicationSettings[overload1]$$$ApplicationSettings -->
<h3 class="fn" id="ApplicationSettings"><a name="ApplicationSettings"></a>ApplicationSettings::<span class="name">ApplicationSettings</span>()</h3>
<p>Constructs a new <a href="applicationsettings.html">ApplicationSettings</a></p>
<!-- @@@ApplicationSettings -->
<!-- $$$ApplicationSettings$$$ApplicationSettingsQQuickItem* -->
<h3 class="fn" id="ApplicationSettings-2"><a name="ApplicationSettings-2"></a>ApplicationSettings::<span class="name">ApplicationSettings</span>(<span class="type">QQuickItem</span> *<i> parent</i>)</h3>
<p>Constructs a new <a href="applicationsettings.html">ApplicationSettings</a> with the given <code>QQuickItem</code> <i>parent</i></p>
<!-- @@@ApplicationSettings -->
<!-- $$$ApplicationSettings$$$ApplicationSettingsconstQString&constQString&QQuickItem* -->
<h3 class="fn" id="ApplicationSettings-3"><a name="ApplicationSettings-3"></a>ApplicationSettings::<span class="name">ApplicationSettings</span>(const <span class="type">QString</span> &amp;<i> appName</i>, const <span class="type">QString</span> &amp;<i> fileName</i>, <span class="type">QQuickItem</span> *<i> parent</i> = 0)</h3>
<p>Constructs a new <a href="applicationsettings.html">ApplicationSettings</a> with the given <code>QQuickItem</code> <i>parent</i> and initializes the application name and settings file using <i>appName</i> and <i>fileName</i>, respectively.</p>
<!-- @@@ApplicationSettings -->
<!-- $$$~ApplicationSettings[overload1]$$$~ApplicationSettings -->
<h3 class="fn" id="dtor.ApplicationSettings"><a name="dtor.ApplicationSettings"></a>ApplicationSettings::<span class="name">~ApplicationSettings</span>()</h3>
<!-- @@@~ApplicationSettings -->
<!-- $$$applicationName[overload1]$$$applicationName -->
<h3 class="fn" id="applicationName"><a name="applicationName"></a><span class="type">QString</span> ApplicationSettings::<span class="name">applicationName</span>() const</h3>
<p>This property is passed to QSettings in order to create the application configuration directory where the settings file will be stored. It must be &quot;harbour-yourapp&quot; in order to pass sandboxing requirements.</p>
<p><b>See also </b><a href="applicationsettings.html#setApplicationName">setApplicationName</a>().</p>
<!-- @@@applicationName -->
<!-- $$$applicationNameChanged[overload1]$$$applicationNameChanged -->
<h3 class="fn" id="applicationNameChanged"><a name="applicationNameChanged"></a><code>[signal] </code><span class="type">void</span> ApplicationSettings::<span class="name">applicationNameChanged</span>()</h3>
<p>Emitted when the <code>applicationName</code> has changed.</p>
<!-- @@@applicationNameChanged -->
<!-- $$$fileName[overload1]$$$fileName -->
<h3 class="fn" id="fileName"><a name="fileName"></a><span class="type">QString</span> ApplicationSettings::<span class="name">fileName</span>() const</h3>
<p>In general, this should be set to &quot;settings&quot; or &quot;config&quot;. You may choose to name the settings file based on the configuration data inside, however.</p>
<p><b>See also </b><a href="applicationsettings.html#setFileName">setFileName</a>().</p>
<!-- @@@fileName -->
<!-- $$$fileNameChanged[overload1]$$$fileNameChanged -->
<h3 class="fn" id="fileNameChanged"><a name="fileNameChanged"></a><code>[signal] </code><span class="type">void</span> ApplicationSettings::<span class="name">fileNameChanged</span>()</h3>
<p>Emitted when the <code>fileName</code> has changed.</p>
<!-- @@@fileNameChanged -->
<!-- $$$isValid[overload1]$$$isValidconstQString& -->
<h3 class="fn" id="isValid"><a name="isValid"></a><span class="type">bool</span> ApplicationSettings::<span class="name">isValid</span>(const <span class="type">QString</span> &amp;<i> property</i>)</h3>
<p>Returns true if <i>property</i> is a valid setting. (Not equal to <code>QVariant::Invalid</code>).</p>
<!-- @@@isValid -->
<!-- $$$refresh[overload1]$$$refresh -->
<h3 class="fn" id="refresh"><a name="refresh"></a><code>[slot] </code><span class="type">void</span> ApplicationSettings::<span class="name">refresh</span>()</h3>
<p>Refreshes all properties defined by the QML interface with those from QSettings</p>
<!-- @@@refresh -->
<!-- $$$setApplicationName[overload1]$$$setApplicationNameconstQString& -->
<h3 class="fn" id="setApplicationName"><a name="setApplicationName"></a><span class="type">void</span> ApplicationSettings::<span class="name">setApplicationName</span>(const <span class="type">QString</span> &amp;<i> appName</i>)</h3>
<p>Sets the application's name to <i>appName</i>.</p>
<p><b>See also </b><a href="applicationsettings.html#applicationName">applicationName</a>().</p>
<!-- @@@setApplicationName -->
<!-- $$$setFileName[overload1]$$$setFileNameconstQString& -->
<h3 class="fn" id="setFileName"><a name="setFileName"></a><span class="type">void</span> ApplicationSettings::<span class="name">setFileName</span>(const <span class="type">QString</span> &amp;<i> fileName</i>)</h3>
<p>Sets the setting file's name to <i>fileName</i>.</p>
<p><b>See also </b><a href="applicationsettings.html#fileName">fileName</a>().</p>
<!-- @@@setFileName -->
<!-- $$$setTarget[overload1]$$$setTargetconstQQmlProperty& -->
<h3 class="fn" id="setTarget"><a name="setTarget"></a><code>[slot] </code><span class="type">void</span> ApplicationSettings::<span class="name">setTarget</span>(const <span class="type">QQmlProperty</span> &amp;<i> qmlProperty</i>)</h3>
<p>Sets the interal value of <i>qmlProperty</i> to whatever is stored in the settings file. If nothing is stored, then the <i>qmlProperty</i>'s state will be unchanged and the value will instead be written into the settings file.</p>
<!-- @@@setTarget -->
<!-- $$$settings[overload1]$$$settings -->
<h3 class="fn" id="settings"><a name="settings"></a><span class="type">QSettings</span> * ApplicationSettings::<span class="name">settings</span>() const</h3>
<p>Returns the <code>QSettings</code> backend of this object. This value will be <code>nullptr</code> if <code>setFileName</code> or <code>setApplicationName</code> have not been given valid values.</p>
<p>You can ensure getting a non-null object by listening to the <code>settingsInitialized</code> signal.</p>
<!-- @@@settings -->
<!-- $$$settingsInitialized[overload1]$$$settingsInitialized -->
<h3 class="fn" id="settingsInitialized"><a name="settingsInitialized"></a><code>[signal] </code><span class="type">void</span> ApplicationSettings::<span class="name">settingsInitialized</span>()</h3>
<p>Emitted when a initialization of the settings file has been completed.</p>
<!-- @@@settingsInitialized -->
<!-- $$$settingsPropertyUpdated[overload1]$$$settingsPropertyUpdatedQString -->
<h3 class="fn" id="settingsPropertyUpdated"><a name="settingsPropertyUpdated"></a><code>[signal] </code><span class="type">void</span> ApplicationSettings::<span class="name">settingsPropertyUpdated</span>(<span class="type">QString</span><i> name</i>)</h3>
<p>Emitted when a user defined QML property has been loaded with the value from a the setting file.</p>
<p>The <i>name</i> parameter is the name of the QML property that was updated.</p>
<!-- @@@settingsPropertyUpdated -->
<!-- $$$updateProperty[overload1]$$$updatePropertyconstQString&constQVariant& -->
<h3 class="fn" id="updateProperty"><a name="updateProperty"></a><code>[slot] </code><span class="type">void</span> ApplicationSettings::<span class="name">updateProperty</span>(const <span class="type">QString</span> &amp;<i> propertyName</i>, const <span class="type">QVariant</span> &amp;<i> value</i>)</h3>
<p>Updates the settings file with <i>propertyName</i> and <i>value</i>.</p>
<!-- @@@updateProperty -->
<!-- $$$value[overload1]$$$valueconstQString& -->
<h3 class="fn" id="value"><a name="value"></a><span class="type">QVariant</span> ApplicationSettings::<span class="name">value</span>(const <span class="type">QString</span> &amp;<i> setting</i>)</h3>
<p>Returns the QVariant setting value of the configuration at <i>setting</i>. Or <code>QVariant::Invalid</code> if unretrievable.</p>
<!-- @@@value -->
</div>
</body>
</html>
